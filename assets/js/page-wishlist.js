(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["page-wishlist"],{

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/wishlist/index.js":
/*!***************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/wishlist/index.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_progress__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/progress */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/components/progress.js\");\n/* harmony import */ var _product_addToCart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../product/addToCart */ \"./cartridges/app_rna_core/cartridge/client/default/js/product/addToCart.js\");\n/* harmony import */ var _helpers_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/utilities */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/utilities.js\");\n\n\n\n\n\nvar globalPublicToggle = document.querySelector('[data-wishlist-component=\"public-toggle\"]');\nvar initWishlist = {\n  updateWishListItem: function updateWishListItem() {\n    $('body').off('listItem:afterUpdate.wishlistPage').on('listItem:afterUpdate.wishlistPage', _toggleWishlistItemStatus);\n  },\n  toggleWishlistStatus: function toggleWishlistStatus() {\n    if (globalPublicToggle) {\n      globalPublicToggle.addEventListener('change', function () {\n        _updatePublicStatus(this.getAttribute('data-id'));\n      });\n    }\n  },\n  toggleWishlistItemStatus: _toggleWishlistItemStatus,\n  addToCartFromWishlist: _product_addToCart__WEBPACK_IMPORTED_MODULE_1__[\"setupAddToCart\"],\n  moreWLItems: function moreWLItems() {\n    var wishlistMoreItems = document.querySelector('[data-wishlist-component=\"more-items\"]');\n\n    if (wishlistMoreItems) {\n      wishlistMoreItems.addEventListener('click', function () {\n        return _renderNewPageOfItems();\n      });\n    }\n  }\n};\n/**\n * toggles the public / private status of the item or wishlist item\n * @param {string} listID - the order model\n * @param {string} itemID - the customer model\n * @param {Object} callback - function to run if the ajax call returns with an\n *                        error so that the checkbox can be reset to it's original state\n */\n\nfunction _updatePublicStatus(listID) {\n  var itemID = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var url = globalPublicToggle.getAttribute('data-url'),\n      targetContainer = itemID ? document.querySelector(\"[data-product-list-item=\\\"\".concat(itemID, \"\\\"]\")) : null;\n  _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"showLoader\"](targetContainer);\n  $.ajax({\n    url: url,\n    type: 'POST',\n    dataType: 'json',\n    data: {\n      listID: listID,\n      itemID: itemID\n    },\n    success: function success(data) {\n      if (callback && !data.success) {\n        callback();\n      }\n\n      _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"hideLoader\"]();\n    },\n    error: function error() {\n      if (callback) {\n        callback();\n      }\n\n      _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"hideLoader\"]();\n    }\n  });\n}\n/**\n * renders the list up to a given page number\n * @param {number} pageNumber - target page number\n */\n\n\nfunction _renderNewPageOfItems(pageNumber) {\n  var wishlistDataEl = document.querySelector('[data-wishlist-uuid]'),\n      publicView = wishlistDataEl.getAttribute('data-wishlist-public'),\n      listUUID = wishlistDataEl.getAttribute('data-wishlist-uuid'),\n      url = wishlistDataEl.getAttribute('data-wishlist-more-url'),\n      wishlistMoreItems = document.querySelector('[data-wishlist-component=\"more-items\"]');\n  pageNumber = pageNumber || parseInt(wishlistDataEl.getAttribute('data-wishlist-page')) + 1;\n  _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"showLoader\"]();\n  $.ajax({\n    url: url,\n    method: 'GET',\n    data: {\n      pageNumber: pageNumber,\n      publicView: publicView,\n      id: listUUID\n    }\n  }).done(function (response) {\n    var productListEl = document.querySelector('[data-wishlist-component=\"product-list\"]');\n    productListEl.insertAdjacentHTML('afterend', response);\n    productListEl.parentNode.removeChild(productListEl);\n    Object(_helpers_utilities__WEBPACK_IMPORTED_MODULE_2__[\"initMethods\"])(initWishlist);\n    Object(_helpers_utilities__WEBPACK_IMPORTED_MODULE_2__[\"initModules\"])(document.querySelector('[data-wishlist-component=\"product-list\"]'));\n    _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"hideLoader\"]();\n  }).fail(function () {\n    wishlistMoreItems.parentNode.removeChild(wishlistMoreItems);\n    _components_progress__WEBPACK_IMPORTED_MODULE_0__[\"hideLoader\"]();\n  });\n}\n\nfunction _toggleWishlistItemStatus() {\n  Object(_helpers_utilities__WEBPACK_IMPORTED_MODULE_2__[\"addEventListenerList\"])('[data-wishlist-component=\"item-public-toggle\"]', 'change', function () {\n    _updatePublicStatus(null, this.getAttribute('data-id'));\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (initWishlist);\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/wishlist/index.js?");

/***/ })

}]);