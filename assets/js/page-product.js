(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["page-product"],{

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/product/caseRefills.js":
/*!********************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/product/caseRefills.js ***!
  \********************************************************************************************/
/*! exports provided: refillsSetup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refillsSetup\", function() { return refillsSetup; });\n/* harmony import */ var _components_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/dialog */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/components/dialog.js\");\n/* harmony import */ var _helpers_pubSub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/pubSub */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/pubSub.js\");\n\n //Runs after modal instance is rendered.\n\nfunction _modalCreatedCallback() {\n  var selRefills = [],\n      refillSels = document.querySelectorAll('[data-sel-refillid]'),\n      refillOpts = document.querySelectorAll('[data-opts-refillid]');\n\n  if (refillSels.length > 0 && refillOpts.length > 0) {\n    [].forEach.call(refillSels, function (refill) {\n      return selRefills.push(refill.dataset.selRefillid);\n    });\n    [].forEach.call(refillOpts, function (refillOpt) {\n      return selRefills.indexOf(refillOpt.value) > -1 ? refillOpt.checked = true : refillOpt.checked = false;\n    });\n  }\n}\n\nfunction _addRefillElementBlock(data) {\n  var container = document.querySelector('[data-product-component=\"selected-refills\"]'),\n      refillTemplate = document.querySelector('[data-refill-template]').firstElementChild.cloneNode(true);\n  refillTemplate.dataset.selRefillid = refillTemplate.dataset.pid = data.id;\n  refillTemplate.dataset.productContainer = 'set-item';\n  refillTemplate.querySelector('img').src = data.productThumbnail && data.productThumbnail.url ? data.productThumbnail.url : '';\n  refillTemplate.querySelector('[data-refill-name]').textContent = data.productName ? data.productName : '';\n  refillTemplate.querySelector('[data-refill-ref]').textContent = data.reference ? data.reference : ''; //refillTemplate.querySelector('[data-refill-price]').textContent = data.formattedSalesPrice ? data.formattedSalesPrice : '';\n\n  container.appendChild(refillTemplate);\n  [].forEach.call(document.querySelectorAll('[data-refill-remove]'), function (currentItem) {\n    return currentItem.addEventListener('click', function () {\n      this.parentNode.remove();\n\n      _handleAddToCartButtonStatus();\n\n      _recalculateBundlePrice();\n    });\n  });\n}\n\nfunction _handleAddToCartButtonStatus() {\n  var addToCartBtn = document.querySelector('.case-refill-req'),\n      container = document.querySelector('[data-product-component=\"selected-refills\"]'),\n      refillSels = container.querySelectorAll('[data-sel-refillid]');\n\n  if (addToCartBtn && !addToCartBtn.hidden && refillSels.length > 0) {\n    addToCartBtn.disabled = false;\n  } else {\n    addToCartBtn.disabled = true;\n  }\n}\n\nfunction _recalculateBundlePrice() {\n  var container = document.querySelector('[data-product-component=\"selected-refills\"]'),\n      refillSels = container.querySelectorAll('[data-sel-refillid]'),\n      productData = [],\n      formData = {};\n  [].forEach.call(refillSels, function (currentItem) {\n    var pid = currentItem.getAttribute('data-pid');\n    productData.push(pid);\n  });\n  formData.pidsArr = JSON.stringify(productData);\n  $.ajax({\n    url: container.dataset.url || '',\n    method: 'POST',\n    data: formData,\n    success: function success(data) {\n      _updatePrice(data.bundlePrice);\n    }\n  });\n}\n\nfunction _updatePrice(priceObj) {\n  var priceContainer = document.querySelector('[data-product-component=\"price\"]');\n\n  if (priceContainer) {\n    var titleSpan = priceContainer.querySelector('span.tile-label'),\n        priceOriginalSpan = priceContainer.querySelector('span.price__original'),\n        priceSalesSpan = priceContainer.querySelector('span.price__sales > span.value'),\n        priceSalesSpanContent = priceSalesSpan.getAttribute('content');\n\n    if ('showStartingFrom' in priceObj && priceObj.showStartingFrom) {\n      titleSpan.classList.remove('hidden');\n    } else {\n      titleSpan.classList.add('hidden');\n    }\n\n    if (priceOriginalSpan != null) {\n      priceOriginalSpan.classList.add('hidden');\n    }\n\n    if (priceSalesSpan && 'sales' in priceObj && priceObj.sales) {\n      if (priceSalesSpanContent) {\n        priceSalesSpan.setAttribute('content', priceObj.sales.decimalPrice);\n      }\n\n      priceSalesSpan.innerHTML = priceObj.sales.formatted;\n    }\n  }\n}\n\nfunction _showSelectedRefills(data) {\n  var container = document.querySelector('[data-product-component=\"selected-refills\"]');\n\n  if (data.response && data.response.selectedRefills) {\n    container.innerHTML = '';\n    var selRefills = JSON.parse(data.response.selectedRefills);\n    [].forEach.call(selRefills, function (selRefill) {\n      return _addRefillElementBlock(selRefill);\n    });\n\n    _handleAddToCartButtonStatus();\n\n    _updatePrice(data.response.bundlePrice);\n  }\n}\n\nfunction refillsSetup() {\n  var addRefillBtn = document.querySelector('.product-addrefill__button');\n  Object(_helpers_pubSub__WEBPACK_IMPORTED_MODULE_1__[\"subscribe\"])('validateRefills:success', function (data) {\n    return _showSelectedRefills(data);\n  });\n  Object(_helpers_pubSub__WEBPACK_IMPORTED_MODULE_1__[\"subscribe\"])('validateRefills:error', function () {\n    var refillOpts = document.querySelectorAll('[data-opts-refillid]');\n    [].forEach.call(refillOpts, function (currentItem) {\n      return currentItem.addEventListener('change', function () {\n        document.querySelector('[data-refill-error]').classList.remove('set--visible');\n      });\n    });\n  });\n\n  if (addRefillBtn) {\n    addRefillBtn.addEventListener('click', function () {\n      _components_dialog__WEBPACK_IMPORTED_MODULE_0__[\"open\"]({\n        url: this.dataset.url || '',\n        type: 'html',\n        callback: _modalCreatedCallback,\n        options: {\n          modalID: 'fragrances-' + this.dataset.pid,\n          modalClass: 'modal--refill',\n          keepAlive: false\n        }\n      });\n    });\n  }\n}\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/product/caseRefills.js?");

/***/ }),

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/product/index.js":
/*!**************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/product/index.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _variationsUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variationsUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/variationsUtils.js\");\n/* harmony import */ var _addToCart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./addToCart */ \"./cartridges/app_rna_core/cartridge/client/default/js/product/addToCart.js\");\n/* harmony import */ var _productPersonalisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./productPersonalisation */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productPersonalisation.js\");\n/* harmony import */ var _helpers_urlUtilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/urlUtilities */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/urlUtilities.js\");\n/* harmony import */ var _productZoom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./productZoom */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productZoom.js\");\n/* harmony import */ var _productUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./productUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productUtils.js\");\n/* harmony import */ var _productDescription__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./productDescription */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productDescription.js\");\n/* harmony import */ var _widget3D__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./widget3D */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/widget3D.js\");\n/* harmony import */ var _caseRefills__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./caseRefills */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/caseRefills.js\");\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  setupAddToCart: _addToCart__WEBPACK_IMPORTED_MODULE_1__[\"setupAddToCart\"],\n  setupConfirmEngravAddToCart: _productPersonalisation__WEBPACK_IMPORTED_MODULE_2__[\"setupConfirmEngravAddToCart\"],\n  setupConfirmEmbossAddToCart: _productPersonalisation__WEBPACK_IMPORTED_MODULE_2__[\"setupConfirmEmbossAddToCart\"],\n  setupConfirmBraceletAdjustmentAddToCart: _productPersonalisation__WEBPACK_IMPORTED_MODULE_2__[\"setupConfirmBraceletAdjustmentAddToCart\"],\n  setupVariationListeners: _variationsUtils__WEBPACK_IMPORTED_MODULE_0__[\"setupVariationListeners\"],\n  setupZoom: _productZoom__WEBPACK_IMPORTED_MODULE_4__[\"setupZoomTriggers\"],\n  setupProductDescription: _productDescription__WEBPACK_IMPORTED_MODULE_6__[\"setupProductDescription\"],\n  widget3DConfiguration: _widget3D__WEBPACK_IMPORTED_MODULE_7__[\"widget3DConfiguration\"],\n  refillsSetup: _caseRefills__WEBPACK_IMPORTED_MODULE_8__[\"refillsSetup\"],\n  afterAttributeSelect: function afterAttributeSelect() {\n    $('body').on('product:afterAttributeSelect', function (evt, response) {\n      var isPDP = response.container && Object(_productUtils__WEBPACK_IMPORTED_MODULE_5__[\"getProductType\"])(response.container) === 'pdp';\n\n      if (isPDP) {\n        Object(_helpers_urlUtilities__WEBPACK_IMPORTED_MODULE_3__[\"updateHistoryState\"])(false, response.data.product.selectedProductUrl);\n      }\n    });\n  }\n});\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/product/index.js?");

/***/ }),

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/product/productDescription.js":
/*!***************************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/product/productDescription.js ***!
  \***************************************************************************************************/
/*! exports provided: setupProductDescription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupProductDescription\", function() { return setupProductDescription; });\n/* harmony import */ var _components_puckSizer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/puckSizer */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/components/puckSizer.js\");\n\nfunction setupProductDescription() {\n  var triggerEl = document.querySelector('[data-puck-component=\"puck-default\"]'),\n      puckTriggers = document.querySelectorAll('[data-product-component=\"puck-trigger\"]');\n  Object(_components_puckSizer__WEBPACK_IMPORTED_MODULE_0__[\"updatePuck\"])(triggerEl);\n  [].forEach.call(puckTriggers, function (currentTrigger) {\n    return currentTrigger.addEventListener('click', handlePuckTrigger);\n  });\n}\n\nfunction handlePuckTrigger() {\n  Object(_components_puckSizer__WEBPACK_IMPORTED_MODULE_0__[\"updatePuck\"])(this);\n}\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/product/productDescription.js?");

/***/ }),

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/product/productZoom.js":
/*!********************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/product/productZoom.js ***!
  \********************************************************************************************/
/*! exports provided: handleZoomTrigger, setupZoomTriggers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleZoomTrigger\", function() { return handleZoomTrigger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupZoomTriggers\", function() { return setupZoomTriggers; });\n/* harmony import */ var _components_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/dialog */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/components/dialog.js\");\n/* harmony import */ var _productUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./productUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productUtils.js\");\n/* harmony import */ var _helpers_modules__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/modules */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/modules.js\");\n/* harmony import */ var _helpers_pubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/pubSub */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/pubSub.js\");\n/* harmony import */ var _helpers_urlUtilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/urlUtilities */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/urlUtilities.js\");\n\n\n\n\n\n\n\n\nfunction _onZoomSlideChange(contextEl) {\n  Object(_helpers_pubSub__WEBPACK_IMPORTED_MODULE_3__[\"subscribe\"])('productZoom:slideChange', function () {\n    _helpers_modules__WEBPACK_IMPORTED_MODULE_2__[\"default\"].tracking.init(null, {\n      trackEvent: 'productSwitchImage',\n      trackObject: {\n        asyncParams: {\n          pid: Object(_productUtils__WEBPACK_IMPORTED_MODULE_1__[\"getPidValue\"])(contextEl)\n        }\n      }\n    });\n  });\n}\n/**\n * Grab the configuration from the closest product container's data-product-querystring attribute.\n * Then display a modal using these configs.\n * @return {[type]} [description]\n */\n\n\nfunction handleZoomTrigger() {\n  var productContainer = Object(_productUtils__WEBPACK_IMPORTED_MODULE_1__[\"getProductContainer\"])(this),\n      params = Object(_helpers_urlUtilities__WEBPACK_IMPORTED_MODULE_4__[\"getQueryStringParams\"])(productContainer.getAttribute('data-product-querystring')),\n      // $mainSlider = $(this.closest('[data-product-component=\"image-gallery\"]')),\n  selectedIndex = this.querySelector('[data-product-component=\"image\"]').getAttribute('data-image-index');\n  params.startindex = selectedIndex; //Always set PID in the case the value is missing from the params.\n\n  params.pid = Object(_productUtils__WEBPACK_IMPORTED_MODULE_1__[\"getPidValue\"])(this);\n  _components_dialog__WEBPACK_IMPORTED_MODULE_0__[\"open\"]({\n    url: Object(_helpers_urlUtilities__WEBPACK_IMPORTED_MODULE_4__[\"appendParamsToURL\"])(window.SFRA.Urls.productZoom, params),\n    options: {\n      modalID: 'productZoom',\n      modalClass: 'modal--product-zoom modal--small-full',\n      keepAlive: false,\n      afterScrollLockCallback: function afterScrollLockCallback(modal) {\n        var zoomGAllery = modal.querySelector('[data-product-component=\"image-gallery\"]'); //Force browser to wait until the previous instruction is done before continuing.\n        //This ensures the zoom gallery is properly adjusted after the scrollbars are hidden.\n\n        window.setTimeout(function () {\n          $(zoomGAllery).slick('setPosition');\n        }, 0);\n      }\n    }\n  });\n}\nfunction setupZoomTriggers() {\n  var zoomTriggers = document.querySelectorAll('[data-product-component=\"zoom-trigger\"]');\n\n  _onZoomSlideChange(zoomTriggers[0]);\n\n  [].forEach.call(zoomTriggers, function (currentTrigger) {\n    return currentTrigger.addEventListener('click', handleZoomTrigger);\n  });\n}\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/product/productZoom.js?");

/***/ }),

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/product/widget3D.js":
/*!*****************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/product/widget3D.js ***!
  \*****************************************************************************************/
/*! exports provided: widget3DConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"widget3DConfiguration\", function() { return widget3DConfiguration; });\nfunction widget3DConfiguration() {\n  var iFrame = document.querySelector('[data-id=\"3DWidget\"]'),\n      tabNav = document.querySelectorAll('[data-auth-component=\"tab-nav\"]'),\n      tabStrapType = document.querySelector('[data-tab-id=\"tab-strap-type\"]'),\n      tabStrapColor = document.querySelector('[data-tab-id=\"tab-strap-color\"]'),\n      strapType = document.querySelectorAll('[data-strap-type]'),\n      strapColor = document.querySelectorAll('[data-strap-color]'),\n      fontType = document.querySelectorAll('[name$=\"engrav_engravMessageFont\"]'),\n      engravLine1Elem = document.querySelector('[data-engrave-msg=\"line-one\"]'),\n      engravLine2Elem = document.querySelector('[data-engrave-msg=\"line-two\"]'),\n      collapseButtons = document.querySelectorAll('[data-strap-section-colapse]'),\n      ctaWrapper = document.querySelector('[data-product-component=\"actions\"]');\n\n  function sendMessage(message) {\n    var content = iFrame.contentWindow;\n    content.postMessage(JSON.stringify(message), '*');\n  }\n\n  [].forEach.call(tabNav, function (currentItem) {\n    return currentItem.addEventListener('click', function () {\n      if (this.dataset.tabId == 'tab-engrave') {\n        sendMessage({\n          view: 'ENGRAVING'\n        });\n        ctaWrapper.classList.add('hidden');\n      } else {\n        ctaWrapper.classList.remove('hidden');\n      }\n\n      if (this.dataset.tabId == 'tab-strap-color') {\n        var selectedColor = document.querySelector('[data-auth-component=\"strap-colors-tab\"] .toggle--active');\n\n        if (selectedColor) {\n          sendMessage({\n            strapId: selectedColor.dataset.strapColor\n          });\n        }\n      }\n    });\n  });\n  [].forEach.call(strapType, function (currentItem) {\n    return currentItem.addEventListener('click', function () {\n      sendMessage(this.dataset);\n    });\n  });\n  [].forEach.call(strapColor, function (currentItem) {\n    return currentItem.addEventListener('click', function () {\n      sendMessage({\n        strapId: this.dataset.strapColor\n      });\n    });\n  });\n  [].forEach.call(fontType, function (currentItem) {\n    return currentItem.addEventListener('change', function () {\n      if (this.value == 'Regular') {\n        sendMessage({\n          engravingFont: 'ARIAL'\n        });\n      } else {\n        sendMessage({\n          engravingFont: 'TIMESNEWROMANITALIC'\n        });\n      }\n    });\n  });\n  [].forEach.call(collapseButtons, function (currentItem) {\n    return currentItem.addEventListener('click', function () {\n      this.closest('[data-auth-component]').classList.remove('toggle--active');\n      ctaWrapper.classList.remove('hidden');\n      [].forEach.call(tabNav, function (currentItem) {\n        currentItem.classList.remove('toggle--active');\n      });\n    });\n  });\n\n  if (tabStrapType) {\n    tabStrapType.addEventListener('click', function () {\n      $('[data-strap-type-carousel]').slick('refresh');\n    }, {\n      once: true\n    });\n  }\n\n  if (tabStrapColor) {\n    tabStrapColor.addEventListener('click', function () {\n      $('[data-strap-color-carousel]').slick('refresh');\n    }, {\n      once: true\n    });\n  }\n\n  if (engravLine1Elem) {\n    engravLine1Elem.addEventListener('input', function () {\n      sendMessage({\n        engravingMsg_1: this.value\n      });\n    });\n  }\n\n  if (engravLine2Elem) {\n    engravLine2Elem.addEventListener('input', function () {\n      sendMessage({\n        engravingMsg_2: this.value\n      });\n    });\n  }\n}\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/product/widget3D.js?");

/***/ }),

/***/ "./cartridges/plugin_instorepickup/cartridge/client/default/js/product/index.js":
/*!**************************************************************************************!*\
  !*** ./cartridges/plugin_instorepickup/cartridge/client/default/js/product/index.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! * /index */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/index.js\");\n/* harmony import */ var _helpers_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/utilities */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/utilities.js\");\n/* harmony import */ var _storePickup_storePickup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storePickup/storePickup */ \"./cartridges/plugin_instorepickup/cartridge/client/default/js/storePickup/storePickup.js\");\n/* harmony import */ var _productStorePickup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./productStorePickup */ \"./cartridges/plugin_instorepickup/cartridge/client/default/js/product/productStorePickup.js\");\n\n\n\n\n\n\nObject(_helpers_utilities__WEBPACK_IMPORTED_MODULE_1__[\"initMethods\"])(_storePickup_storePickup__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nObject(_helpers_utilities__WEBPACK_IMPORTED_MODULE_1__[\"initMethods\"])(_productStorePickup__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n/* harmony default export */ __webpack_exports__[\"default\"] = (_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=webpack:///./cartridges/plugin_instorepickup/cartridge/client/default/js/product/index.js?");

/***/ }),

/***/ "./cartridges/plugin_instorepickup/cartridge/client/default/js/product/productStorePickup.js":
/*!***************************************************************************************************!*\
  !*** ./cartridges/plugin_instorepickup/cartridge/client/default/js/product/productStorePickup.js ***!
  \***************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _addToCart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./addToCart */ \"./cartridges/app_rna_core/cartridge/client/default/js/product/addToCart.js\");\n/* harmony import */ var _availabilityUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./availabilityUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/availabilityUtils.js\");\n/* harmony import */ var _variationsUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./variationsUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/variationsUtils.js\");\n/* harmony import */ var _helpers_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/utilities */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/helpers/utilities.js\");\n/* harmony import */ var _modules_module_store_locator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/module.store-locator.js */ \"./cartridges/app_rna_core/cartridge/client/default/js/modules/module.store-locator.js\");\n/* harmony import */ var _productUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./productUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productUtils.js\");\n/* harmony import */ var _storePickup_storePickup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storePickup/storePickup */ \"./cartridges/plugin_instorepickup/cartridge/client/default/js/storePickup/storePickup.js\");\n\n\n\n\n\n\n\n\n\n/**\n * Update the product data with the `storeId` value before it's added to cart.\n */\n\nfunction _setStoreIDOnProductData(productObject, productContainer) {\n  var storeIDEl = Object(_modules_module_store_locator_js__WEBPACK_IMPORTED_MODULE_4__[\"getSelectedStoreInput\"])(productContainer),\n      productOptions = JSON.parse(productObject.options);\n  productObject.storeId = storeIDEl && storeIDEl.value ? storeIDEl.value : null; //Push the selected `storeId` in the product's options array.\n  //This is a safe way to handle it since in the backend `cartHelpers.addProductToCart()` method,\n  //the `storeId` object is removed from this options array.\n\n  if (productOptions) {\n    productOptions.push({\n      storeId: productObject.storeId\n    });\n    productObject.options = JSON.stringify(productOptions);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  updateSelectStore: function updateSelectStore() {\n    $('body').on('storePickup:afterInventoryCheck', function (evt, response) {\n      Object(_storePickup_storePickup__WEBPACK_IMPORTED_MODULE_6__[\"updateTriggerStatus\"])(response.data, response.container);\n      Object(_availabilityUtils__WEBPACK_IMPORTED_MODULE_1__[\"updateAvailability\"])(response.data, response.container);\n      Object(_addToCart__WEBPACK_IMPORTED_MODULE_0__[\"updateAddToCart\"])(response.data.product, response.container);\n    });\n  },\n  removeSelectedStoreOnAttributeChange: function removeSelectedStoreOnAttributeChange() {\n    $('body').on('product:afterAttributeSelect', function (evt, response) {\n      var storeIDEl = Object(_modules_module_store_locator_js__WEBPACK_IMPORTED_MODULE_4__[\"getSelectedStoreInput\"])(response.container);\n      Object(_storePickup_storePickup__WEBPACK_IMPORTED_MODULE_6__[\"updateTriggerStatus\"])(response.data, response.container);\n\n      if (storeIDEl && storeIDEl.value) {\n        Object(_storePickup_storePickup__WEBPACK_IMPORTED_MODULE_6__[\"requestInventoryCheck\"])(response.container, response.data.product.id, storeIDEl.value);\n      }\n    });\n  },\n  updateAddToCartFormData: function updateAddToCartFormData() {\n    $('body').on('product:updateAddToCartFormData', function (e, response) {\n      //Special check for when the current product has children products.\n      //This should only be the case for Product Sets.\n      if (response.formData.pidsObj) {\n        var pidsObj = JSON.parse(response.formData.pidsObj);\n        pidsObj.forEach(function (currentData, index) {\n          _setStoreIDOnProductData(currentData, response.childProducts.list[index]);\n        });\n        response.formData.pidsObj = JSON.stringify(pidsObj);\n      }\n\n      _setStoreIDOnProductData(response.formData, response.container);\n    });\n  },\n  removeStoreSelection: function removeStoreSelection() {\n    Object(_helpers_utilities__WEBPACK_IMPORTED_MODULE_3__[\"addEventListenerList\"])('[data-product-component=\"pickup-remove\"]', 'click', function () {\n      Object(_storePickup_storePickup__WEBPACK_IMPORTED_MODULE_6__[\"deselectStore\"])(Object(_productUtils__WEBPACK_IMPORTED_MODULE_5__[\"getProductContainer\"])(this));\n      _variationsUtils__WEBPACK_IMPORTED_MODULE_2__[\"requestProductUpdate\"].call(Object(_productUtils__WEBPACK_IMPORTED_MODULE_5__[\"getQuantitySelector\"])(this));\n    });\n  }\n});\n\n//# sourceURL=webpack:///./cartridges/plugin_instorepickup/cartridge/client/default/js/product/productStorePickup.js?");

/***/ })

}]);